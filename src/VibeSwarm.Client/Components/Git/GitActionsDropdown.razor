@* Git actions dropdown menu component *@

<div class="dropdown flex-shrink-0">
	<button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown"
		aria-expanded="false" disabled="@IsDisabled" title="Git actions">
		<i class="bi bi-git"></i>
		<span class="d-none d-sm-inline ms-1">Git</span>
	</button>
	<ul class="dropdown-menu dropdown-menu-end">
		<li>
			<button class="dropdown-item" @onclick="OnCreateBranch" disabled="@IsDisabled">
				<i class="bi bi-plus-lg me-2 text-primary"></i>New Branch
			</button>
		</li>
		<li>
			<button class="dropdown-item" @onclick="OnSync" disabled="@IsDisabled">
				@if (IsSyncing)
				{
					<span class="spinner-border spinner-border-sm me-2" role="status"></span>
				}
				else
				{
					<i class="bi bi-cloud-download me-2 text-success"></i>
				}
				Sync with Origin
			</button>
		</li>
		<li>
			<button class="dropdown-item" @onclick="OnPruneBranches" disabled="@(IsDisabled || IsPruning)">
				@if (IsPruning)
				{
					<span class="spinner-border spinner-border-sm me-2" role="status"></span>
				}
				else
				{
					<i class="bi bi-scissors me-2 text-warning"></i>
				}
				Prune Stale Branches
			</button>
		</li>
		<li>
			<hr class="dropdown-divider">
		</li>
		<li>
			<button class="dropdown-item" @onclick="OnRefresh" disabled="@IsDisabled">
				<i class="bi bi-arrow-clockwise me-2 @(IsRefreshing ? "spin" : "")"></i>
				Refresh Branches
			</button>
		</li>
	</ul>
</div>

@code {
	[Parameter]
	public bool IsDisabled { get; set; }

	[Parameter]
	public bool IsSyncing { get; set; }

	[Parameter]
	public bool IsRefreshing { get; set; }

	[Parameter]
	public bool IsPruning { get; set; }

	[Parameter]
	public EventCallback OnCreateBranch { get; set; }

	[Parameter]
	public EventCallback OnSync { get; set; }

	[Parameter]
	public EventCallback OnRefresh { get; set; }

	[Parameter]
	public EventCallback OnPruneBranches { get; set; }
}