@* Generic Alert component for displaying messages *@

@if (!string.IsNullOrEmpty(Message) || ChildContent != null)
{
	<div class="alert @AlertClass @Class" role="alert">
		@if (ShowIcon)
		{
			<i class="bi @IconClass me-2"></i>
		}
		@if (ChildContent != null)
		{
			@ChildContent
		}
		else
		{
			@Message
		}
		@if (Dismissible && OnDismiss.HasDelegate)
		{
			<button type="button" class="btn-close" @onclick="OnDismiss" aria-label="Close"></button>
		}
	</div>
}

@code {
	/// <summary>
	/// The message to display in the alert
	/// </summary>
	[Parameter]
	public string? Message { get; set; }

	/// <summary>
	/// The type of alert (determines styling)
	/// </summary>
	[Parameter]
	public AlertType Type { get; set; } = AlertType.Info;

	/// <summary>
	/// Additional CSS classes to apply to the alert
	/// </summary>
	[Parameter]
	public string? Class { get; set; }

	/// <summary>
	/// Whether to show an icon based on the alert type
	/// </summary>
	[Parameter]
	public bool ShowIcon { get; set; } = true;

	/// <summary>
	/// Whether the alert can be dismissed
	/// </summary>
	[Parameter]
	public bool Dismissible { get; set; }

	/// <summary>
	/// Event callback when the alert is dismissed
	/// </summary>
	[Parameter]
	public EventCallback OnDismiss { get; set; }

	/// <summary>
	/// Optional child content to render instead of the message
	/// </summary>
	[Parameter]
	public RenderFragment? ChildContent { get; set; }

	private string AlertClass => Type switch
	{
		AlertType.Success => "alert-success",
		AlertType.Danger => "alert-danger",
		AlertType.Warning => "alert-warning",
		AlertType.Info => "alert-info",
		AlertType.Primary => "alert-primary",
		AlertType.Secondary => "alert-secondary",
		_ => "alert-info"
	};

	private string IconClass => Type switch
	{
		AlertType.Success => "bi-check-circle",
		AlertType.Danger => "bi-exclamation-circle",
		AlertType.Warning => "bi-exclamation-triangle",
		AlertType.Info => "bi-info-circle",
		AlertType.Primary => "bi-info-circle",
		AlertType.Secondary => "bi-info-circle",
		_ => "bi-info-circle"
	};

	public enum AlertType
	{
		Success,
		Danger,
		Warning,
		Info,
		Primary,
		Secondary
	}
}