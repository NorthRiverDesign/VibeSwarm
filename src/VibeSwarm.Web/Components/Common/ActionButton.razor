@* Reusable action button with icon and optional text *@

<button type="@Type"
	class="btn @GetButtonClass() @SizeClass d-inline-flex align-items-center justify-content-center gap-1"
	@onclick="HandleClick" disabled="@(IsLoading || Disabled)" title="@Title">
	@if (IsLoading)
	{
		<span class="spinner-border spinner-border-sm" role="status"></span>
	}
	else if (!string.IsNullOrEmpty(Icon))
	{
		<i class="bi bi-@Icon"></i>
	}
	@if (!string.IsNullOrEmpty(Text))
	{
		<span class="@(HideTextOnMobile ? "d-none d-md-inline" : "")">@Text</span>
	}
</button>

@code {
	[Parameter]
	public string? Icon { get; set; }

	[Parameter]
	public string? Text { get; set; }

	[Parameter]
	public string? Title { get; set; }

	[Parameter]
	public string Type { get; set; } = "button";

	[Parameter]
	public ButtonStyle Style { get; set; } = ButtonStyle.Secondary;

	[Parameter]
	public bool Outline { get; set; }

	[Parameter]
	public ButtonSize Size { get; set; } = ButtonSize.Default;

	[Parameter]
	public bool IsLoading { get; set; }

	[Parameter]
	public bool Disabled { get; set; }

	[Parameter]
	public bool HideTextOnMobile { get; set; }

	[Parameter]
	public EventCallback OnClick { get; set; }

	private string SizeClass => Size switch
	{
		ButtonSize.Small => "btn-sm",
		ButtonSize.Large => "btn-lg",
		_ => ""
	};

	private string GetButtonClass()
	{
		var prefix = Outline ? "btn-outline-" : "btn-";
		return prefix + Style switch
		{
			ButtonStyle.Primary => "primary",
			ButtonStyle.Danger => "danger",
			ButtonStyle.Success => "success",
			ButtonStyle.Warning => "warning",
			ButtonStyle.Info => "info",
			_ => "secondary"
		};
	}

	private async Task HandleClick()
	{
		if (!IsLoading && !Disabled)
		{
			await OnClick.InvokeAsync();
		}
	}

	public enum ButtonStyle
	{
		Primary,
		Secondary,
		Danger,
		Success,
		Warning,
		Info
	}

	public enum ButtonSize
	{
		Small,
		Default,
		Large
	}
}